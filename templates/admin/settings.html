{% extends "admin/layout.html" %}

{% block admin_content %}
<div class="card">
    <h2>Temple Settings</h2>
    <form method="post">
        <div class="form-group">
            <label for="name_mal">Temple Name (Malayalam) *</label>
            <input type="text" id="name_mal" name="name_mal" value="{{ settings.name_mal }}" required
                placeholder="ക്ഷേത്ര നാമം">
        </div>

        <div class="form-group">
            <label for="name_eng">Temple Name (English)</label>
            <input type="text" id="name_eng" name="name_eng" value="{{ settings.name_eng }}" placeholder="Temple Name">
        </div>

        <div class="form-group">
            <label for="place">Place / District</label>
            <input type="text" id="place" name="place" value="{{ settings.place }}" placeholder="Place">
        </div>

        <div class="form-group">
            <label for="subtitle_mal">Subtitle (Malayalam)</label>
            <input type="text" id="subtitle_mal" name="subtitle_mal" value="{{ settings.subtitle_mal or '' }}"
                placeholder="ഉപശീർഷകം">
        </div>

        <div class="form-group">
            <label for="subtitle_eng">Subtitle (English) / Reg No.</label>
            <input type="text" id="subtitle_eng" name="subtitle_eng" value="{{ settings.subtitle_eng or '' }}"
                placeholder="Subtitle / Reg No">
        </div>

        <div class="form-group">
            <label for="receipt_footer">Receipt Footer Message</label>
            <textarea id="receipt_footer" name="receipt_footer" rows="2"
                style="width: 100%; border: 1px solid #e2e8f0; border-radius: 4px; padding: 8px;">{{ settings.receipt_footer }}</textarea>
        </div>

        <div class="form-group">
            <label for="print_template_content">Print Receipt Template (HTML)</label>
            <p style="font-size: 0.8rem; color: #64748b; margin-top: -4px; margin-bottom: 8px;">
                Use Jinja2 variables: <code>slip.bill_no</code>, <code>slip.devotee_name</code>,
                <code>slip.items</code>, etc.
            </p>
            <textarea id="print_template_content" name="print_template_content" rows="15"
                style="width: 100%; border: 1px solid #e2e8f0; border-radius: 4px; padding: 8px; font-family: monospace; font-size: 13px;">{{ settings.print_template_content }}</textarea>
        </div>

        <div class="form-group" style="display: flex; align-items: center; gap: 8px;">
            <input type="checkbox" id="backup_enabled" name="backup_enabled" style="width: auto;" {% if
                settings.backup_enabled %}checked{% endif %}>
            <label for="backup_enabled" style="margin: 0;">Enable Cloud Backup (Optional)</label>
        </div>

        <div style="margin-top: 1rem; display: flex; gap: 1rem; align-items: center; flex-wrap: wrap;">
            <button type="submit" class="btn btn-primary">Save Settings</button>
            <button type="submit" formaction="{{ url_for('admin.trigger_backup') }}" class="btn btn-secondary">Backup
                Now</button>
        </div>
    </form>
</div>


{% endblock %}